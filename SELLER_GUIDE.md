# 卖家后台使用指南

## 🎯 如何成为卖家

在使用卖家后台之前，你需要将你的账号设置为卖家角色。

### 方法 1：通过 Supabase Dashboard（推荐）

1. 打开 Supabase Dashboard: https://supabase.com/dashboard
2. 选择你的项目
3. 点击左侧菜单的 **SQL Editor**
4. 执行以下 SQL 语句（替换邮箱为你的注册邮箱）：

```sql
-- 将账号设置为卖家
UPDATE profiles
SET role = 'seller'
WHERE email = 'your-email@example.com';
```

5. 刷新页面，现在你就可以访问卖家后台了！

### 方法 2：使用 Supabase 触发器

也可以在 Supabase 中执行 `supabase/migrations/005_auto_create_profile.sql` 文件，这会在注册时自动创建 profile 记录。

## 📦 访问卖家后台

设置好卖家角色后，访问卖家后台：

```
http://localhost:3001/seller
```

## 🛍️ 卖家后台功能

### 1. 仪表板 (`/seller`)

- **总览数据**：查看商品数量、订单数量、总收入等统计信息
- **快速操作**：快速访问常用功能
- **店铺提示**：查看运营建议

### 2. 商品管理 (`/seller/products`)

#### 查看商品列表
- 显示所有商品
- 筛选：全部 / 在售 / 已下架
- 查看商品信息：图片、名称、价格、库存、状态、销量

#### 商品操作
- **编辑**：修改商品信息
- **上架/下架**：切换商品状态
- **删除**：删除商品（实际是软删除，设置 status 为 'deleted'）

### 3. 添加商品 (`/seller/products/new`)

填写以下信息创建新商品：

#### 基本信息
- **商品名称**（必填）：商品的标题
- **商品描述**：详细描述商品特点
- **商品分类**：选择商品所属分类

#### 价格设置
- **售价**（必填）：商品当前售价
- **原价**（可选）：用于显示折扣，如 ¥199 → ¥99（节省 ¥100）

#### 库存管理
- **库存数量**（必填）：商品可售数量

#### 商品图片
- 支持添加多张图片
- 第一张图片将作为主图显示
- 输入图片 URL（建议使用图床服务）

#### 上架状态
- **立即上架**：商品创建后立即在商店展示
- **暂不上架**：保存为草稿，稍后上架

### 4. 编辑商品 (`/seller/products/[id]/edit`)

与添加商品页面相同，用于修改已有商品的信息。

## 💡 使用技巧

### 图片建议

推荐使用以下图床服务上传商品图片：

1. **Unsplash** (免费高质量图片)
   - https://unsplash.com/
   - 示例: `https://images.unsplash.com/photo-xxx?w=400&h=400&fit=crop`

2. **Imgur** (免费图床)
   - https://imgur.com/

3. **Cloudinary** (专业图床)
   - https://cloudinary.com/

### 商品命名

- 使用清晰、描述性的商品名称
- 包含关键信息：品牌、型号、规格
- 例如：`苹果 iPhone 15 Pro 256GB 钛金属`

### 定价策略

- 如果有折扣，设置"原价"可以显示折扣百分比
- 原价 ¥8999，售价 ¥7999 → 显示 `-11%` 折扣标签

### 库存管理

- 库存 < 10 件时，商品卡片会显示"仅剩 X 件"提示
- 库存 = 0 时，商品显示"暂时缺货"

## 🔒 权限说明

- **普通用户 (user)**：只能浏览商品、购买
- **卖家 (seller)**：可以访问卖家后台，管理自己的商品和订单
- **管理员 (admin)**：拥有所有权限，包括管理所有商品和用户

## 🚀 快速开始示例

### 1. 注册账号
```
访问 http://localhost:3001/signup
填写信息并注册
```

### 2. 设置为卖家
```sql
-- 在 Supabase SQL Editor 中执行
UPDATE profiles
SET role = 'seller'
WHERE email = 'your-email@example.com';
```

### 3. 添加第一个商品
```
1. 访问 http://localhost:3001/seller
2. 点击"添加商品"
3. 填写商品信息
4. 点击"创建商品"
```

### 4. 查看商品
```
前台查看：http://localhost:3001/products
后台管理：http://localhost:3001/seller/products
```

## 📝 常见问题

### Q: 无法访问卖家后台？
A: 确保你的账号 role 已设置为 'seller' 或 'admin'

### Q: 如何上传图片？
A: 使用图床服务上传图片后，将图片 URL 复制到表单中

### Q: 商品不显示在前台？
A: 检查商品状态是否为"在售"(active)，库存是否充足

### Q: 如何修改已发布的商品？
A: 在商品列表中点击"编辑"按钮

### Q: 删除的商品可以恢复吗？
A: 删除是软删除，数据库中仍保留，可以通过 SQL 恢复

## 🎨 下一步

- 完善商品信息和图片
- 设置合理的价格和库存
- 定期检查订单并及时处理
- 回复买家评价
- 查看销售数据优化店铺

---

**祝你店铺运营顺利！** 🎉
